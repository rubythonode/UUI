UUI.BUTTON=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c=i.img,f=i.title,s=void 0===i.spacing?0:i.spacing,v=i.href,p=i.target,g=i.style,y=i.on;void 0!==y&&EACH(y,function(e,t){y[t]=function(t){e(t,n)}}),o=A({style:COMBINE_DATA({origin:{display:"block",textAlign:"center",cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},extend:g}),href:v,target:p,on:y}),void 0!==f&&o.prepend(r=DIV({children:[void 0===f?"":f]})),void 0!==c&&o.prepend(DIV({style:{marginBottom:void 0!==f?s:0},children:[c]})),n.setTitle=d=function(e){r.removeAllChildren(),r.append(e)},n.getImg=u=function(){return c},n.getDom=l=function(){return o},n.tap=a=function(){void 0!==y&&void 0!==y.tap&&y.tap()}}}),UUI.BUTTON_H=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f=i.img,s=i.title,v=void 0===i.spacing?0:i.spacing,p=i.href,g=i.target,y=i.style,S=i.on;void 0!==S&&EACH(S,function(e,t){S[t]=function(t){e(t,n)}}),o=A({style:COMBINE_DATA({origin:{display:"block",cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},extend:y}),href:p,target:g,on:S,children:[r=DIV({style:{flt:"left"},children:[void 0===s?"":s]}),CLEAR_BOTH()]}),void 0!==f&&(f.addStyle({flt:"left"}),void 0===f.getStyle("margin")&&void 0===f.getStyle("marginRight")&&f.addStyle({marginRight:v}),o.prepend(f),d=EVENT({node:f,name:"load"},function(){r.addStyle({marginTop:(f.getHeight()-r.getHeight())/2}),d.remove()})),n.setTitle=u=function(e){r.removeAllChildren(),r.append(e)},n.getImg=l=function(){return f},n.getDom=a=function(){return o},n.tap=c=function(){void 0!==S&&void 0!==S.tap&&S.tap()}}}),UUI.FULL_CHECKBOX=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g=i.name,y=i.label,A=i.value,S=(i.children,i.wrapperStyle),h=i.inputStyle,m=i.on;void 0!==m&&EACH(m,function(e,t){m[t]=function(t){e(t,n)}}),o=DIV({style:{position:"relative"},on:{tap:function(e){r.toggleCheck(),e.stop()}},children:[r=INPUT({style:{flt:"left",marginRight:5},name:g,type:"checkbox",on:COMBINE_DATA({origin:{tap:function(e){e.stop()}},extend:void 0!==m?m:{}}),value:A}),d=SPAN({style:{flt:"left",cursor:"pointer"},children:[y]}),CLEAR_BOTH()]}),o.isValidWrapper=!0,n.getDom=u=function(){return o},n.getName=l=function(){return g},n.getValue=a=function(){return r.getValue()},n.setValue=c=function(e){r.setValue(e)},n.select=f=function(){r.select()},n.blur=s=function(){r.blur()},n.addWrapperStyle=v=function(e){o.addStyle(e)},void 0!==S&&v(S),n.addInputStyle=p=function(e){r.addStyle(e)},void 0!==h&&p(h)}}),UUI.FULL_INPUT=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g,y,A,S,h=i.name,m=i.type,C=i.placeholder,E=i.value,D=i.wrapperStyle,T=i.inputStyle,I=i.on,U=i.isHidePlaceholder,O=COMBINE_DATA({origin:{position:"absolute",top:0,color:"#999",cursor:"text"},extend:void 0!==T&&"center"===T.textAlign?{left:0,width:"100%",textAlign:"center"}:{left:void 0===E?0:E.length}});void 0!==I&&EACH(I,function(e,t){I[t]=function(t){e(t,n)}}),r=DIV({style:{padding:5,backgroundColor:"#FFF"},children:[DIV({style:{position:"relative"},children:[SPAN({style:{visibility:"hidden"},children:["."]}),u=UUI.TEXT_BUTTON({style:O,title:C}),d=INPUT({style:{position:"absolute",left:0,top:0,width:"100%",border:"none",background:"transparent"},name:h,type:m,value:E,on:{change:function(e){l(),void 0!==I&&void 0!==I.change&&I.change(e,n)},keydown:function(e){o=DELAY(function(){l()}),void 0!==I&&void 0!==I.keydown&&I.keydown(e,n)},keyup:function(e){l(),void 0!==I&&void 0!==I.keyup&&I.keyup(e,n)}}})]})]}),l=RAR(function(){var e=d.getValue(),t=0,n=d.getStyle("fontSize"),i=void 0===n?12:INTEGER(n);"center"===d.getStyle("textAlign")?(u.addStyle({left:0,width:"100%",textAlign:"center"}),""===e?u.show():u.hide()):U===!0?(u.addStyle({left:0,width:"auto",textAlign:"left"}),""===e?u.show():u.hide()):(REPEAT(e.length,function(n){var i=e.charAt(n);t+=escape(i).length>4?1.8:1}),u.addStyle({left:t*i/1.6+(t>0?5:0),width:"auto",textAlign:"left"}))}),r.addRemoveHandler(function(){void 0!==o&&o.remove()}),r.isValidWrapper=!0,n.getInputDom=a=function(){return d},n.getDom=c=function(){return r},n.getName=f=function(){return h},n.getValue=s=function(){return d.getValue()},n.setValue=v=function(e){d.setValue(e)},n.select=p=function(){d.select()},n.focus=g=function(){d.focus()},n.blur=y=function(){d.blur()},n.addWrapperStyle=A=function(e){r.addStyle(e)},void 0!==D&&A(D),n.addInputStyle=S=function(e){d.addStyle(e),u.addStyle(e),u.addStyle(O)},void 0!==T&&S(T)}}),UUI.FULL_SELECT=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g=i.name,y=i.value,A=i.options,S=i.wrapperStyle,h=i.selectStyle,m=i.on;void 0!==m&&EACH(m,function(e,t){m[t]=function(t){e(t,n)}}),o=DIV({style:{padding:5,backgroundColor:"#FFF",position:"relative"},children:[r=SELECT({style:{width:"100%",border:"none"},on:m,name:g})]}),o.isValidWrapper=!0,n.getDom=d=function(){return o},n.getName=u=function(){return g},n.getValue=l=function(){return r.getValue()},n.setValue=a=function(e){r.setValue(e)},void 0!==y&&a(y),n.select=c=function(){r.select()},n.blur=f=function(){r.blur()},n.addWrapperStyle=s=function(e){o.addStyle(e)},void 0!==S&&s(S),n.addSelectStyle=v=function(e){r.addStyle(e)},void 0!==h&&v(h),n.addOption=p=function(e){r.append(e)},void 0!==A&&EACH(A,function(e){p(e)})}}),UUI.FULL_SUBMIT=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d=void 0===i?void 0:i.style,u=void 0===i?void 0:i.value,l=void 0===i?void 0:i.on;void 0!==l&&EACH(l,function(e,t){l[t]=function(t){e(t,n)}}),o=INPUT({type:"submit",style:COMBINE_DATA({origin:{border:"none",width:"100%",padding:"10px 0",cursor:"pointer"},extend:d}),on:l}),void 0!==u&&o.setValue(u),n.getDom=r=function(){return o}}}),UUI.FULL_TEXTAREA=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g,y=i.name,A=i.placeholder,S=i.value,h=i.wrapperStyle,m=i.textareaStyle,C=i.on;void 0!==C&&EACH(C,function(e,t){C[t]=function(t){e(t,n)}}),o=DIV({style:{padding:5,backgroundColor:"#FFF",position:"relative",height:100},children:[r=TEXTAREA({style:{width:"100%",height:"100%",backgroundColor:"transparent",border:"none"},name:y,placeholder:A,on:C,value:S})]}),o.isValidWrapper=!0,n.getTextareaDom=d=function(){return r},n.getDom=u=function(){return o},n.getName=l=function(){return y},n.getValue=a=function(){return r.getValue()},n.setValue=c=function(e){r.setValue(e)},n.select=f=function(){r.select()},n.focus=s=function(){r.focus()},n.blur=v=function(){r.blur()},n.addWrapperStyle=p=function(e){o.addStyle(e)},void 0!==h&&p(h),n.addTextareaStyle=g=function(e){r.addStyle(e)},void 0!==m&&g(m)}}),UUI.FULL_UPLOAD_FORM=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g=i.wrapperStyle,y=i.formStyle,A=i.inputStyle,S=i.uploadingStyle,h=i.box,m=i.afterUpload,C=i.on;void 0!==C&&EACH(C,function(e,t){C[t]=function(t){e(t,n)}}),o=DIV({style:{padding:5,background:"#FFF",position:"relative"},children:[u=IFRAME({style:{display:"none"},name:"__UPLOAD_FORM_"+n.id}),r=FORM({action:"/"+h.boxName+"/__UPLOAD?"+CONFIG.version,target:"__UPLOAD_FORM_"+n.id,method:"POST",enctype:"multipart/form-data",style:{padding:5},children:[d=INPUT({type:"file",isMultiple:!0,style:{width:"100%",height:"100%",color:"#000",border:"none"},on:C}),INPUT({type:"submit",style:{visibility:"hidden",position:"absolute"}})]}),l=UUI.PANEL({wrapperStyle:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"none"},contentStyle:{backgroundColor:"#000",position:"absolute",top:"50%",left:"50%",width:100,marginLeft:-55,marginTop:-13,padding:5,textAlign:"center",borderRadius:10},children:["Uploading..."]})]}),r.isValidWrapper=!0,EVENT({node:u,name:"load"},function(){var e=global["__UPLOAD_FORM_"+n.id],t=void 0!==e?e.fileDataSet:void 0,i=void 0!==e?e.errorCode:void 0;(void 0!==t||void 0!==i)&&(EACH(t,function(e,n){t[n]=UNPACK_DATA(e)}),d.setValue(""),m(t,i)),l.hide()}),EVENT({node:d,name:"change"},function(){""!==d.getValue()&&(l.show(),r.submit(!0))}),n.getDom=a=function(){return o},n.select=c=function(){d.select()},n.addWrapperStyle=f=function(e){o.addStyle(e)},void 0!==g&&f(g),n.addFormStyle=s=function(e){r.addStyle(e)},void 0!==y&&s(y),n.addInputStyle=v=function(e){d.addStyle(e)},void 0!==A&&v(A),n.addUploadingStyle=p=function(e){l.addWrapperStyle(e)},void 0!==S&&p(S)}}),UUI.IMG_BUTTON=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l=i.img,a=i.href,c=i.target,f=i.style,s=i.on;void 0!==s&&EACH(s,function(e,t){s[t]=function(t){e(t,n)}}),o=A({style:COMBINE_DATA({origin:{cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},extend:f}),href:a,target:c,on:s,children:[l]}),n.getImg=r=function(){return l},n.getDom=d=function(){return o},n.tap=u=function(){o.tap()}}}),UUI.LIST=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s=void 0===i?void 0:i.style,v=void 0===i?void 0:i.children,p=void 0===i?void 0:i.isRequiringClearBoth,g=[],y={};void 0===r&&(r={}),o=UL({style:s,children:v}),n.getDom=u=function(){return o},n.addItem=l=function(e){var t=e.key,n=e.item,i=e.isFirst;void 0!==r[t]?(n.insertBefore(r[t]),g[FIND_KEY({data:g,value:r[t]})]=n,r[t].remove()):i===!0&&g.length>0?(n.insertBefore(g[0]),g.unshift(n)):(o.append(n),g.push(n)),r[t]=n,p===!0&&(void 0!==d&&d.remove(),d=CLEAR_BOTH().appendTo(o))},void 0!==i&&void 0!==i.items&&EACH(i.items,function(e,t){l({key:t,item:e})}),n.removeItem=a=function(e){var t=r[e],n=y[e];void 0!==t&&t.remove(),void 0!==n&&EACH(n,function(e){e()}),REMOVE({data:g,value:t}),REMOVE_AT({data:r,key:e}),REMOVE_AT({data:y,key:e})},n.addRemoveItemHandler=c=function(e,t){void 0===y[e]&&(y[e]=[]),y[e].push(t)},n.removeAllItems=f=function(){EACH(r,function(e,t){var n=y[t];e.remove(),void 0!==n&&EACH(n,function(e){e()})}),r={},g=[],y={}}}}),UUI.LOADING=CLASS({init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g=i.wrapperStyle,y=i.contentStyle,A=i.indicator,S=i.msg;o=UUI.MODAL({wrapperStyle:COMBINE_DATA({origin:{textAlign:"center"},extend:g}),contentStyle:y,isCannotClose:!0,children:[void 0===A?"":A,P({style:void 0===A?{}:{marginTop:10},children:[S]})]}),n.getDom=r=function(){return o.getDom()},n.append=d=function(e){o.append(e)},n.prepend=u=function(e){o.prepend(e)},n.after=l=function(e){o.after(e)},n.before=a=function(e){o.before(e)},n.remove=c=function(){o.remove()},n.removeAllChildren=f=function(){o.removeAllChildren()},n.getChildren=s=function(){return o.getChildren()},n.addWrapperStyle=v=function(e){o.addWrapperStyle(e)},n.addContentStyle=p=function(e){o.addContentStyle(e)}}}),UUI.MODAL=CLASS({init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g,y,A,S,h,m,C=void 0===i?void 0:i.children,E=void 0===i?void 0:i.wrapperStyle,D=void 0===i?void 0:i.contentStyle,T=void 0===i?void 0:i.xStyle,I=void 0===i?void 0:i.xImg,U=void 0===i?void 0:i.isCannotClose,O=void 0===i?void 0:i.on;void 0===I&&U!==!0&&(I=IMG({src:UUI.R("x.png")})),o=DIV({children:[r=DIV(),U===!0?"":UUI.IMG_BUTTON({style:COMBINE_DATA({origin:{position:"absolute"},extend:void 0===T?{top:-20,right:-20,padding:10}:T}),img:I,on:{tap:function(){m()},mouseover:function(){S({opacity:.8})},mouseout:function(){S({opacity:1})}}})]}).appendTo(BODY),a=RAR(function(){var e,t=(WIN_WIDTH()-o.getWidth())/2+SCROLL_LEFT(),n=(WIN_HEIGHT()-o.getHeight())/2+SCROLL_TOP();o.addStyle({position:"absolute",left:0>t?0:t,top:0>n?0:n}),(e=function(t){EACH(t,function(t){t.type===IMG&&EVENT({node:t,name:"load"},function(){a()}),void 0!==t.getChildren&&e(t.getChildren())})})(o.getChildren())}),o.addShowHandler(a),d=EVENT({name:"resize"},a),u=EVENT({name:"scroll"},a),l=EVENT({name:"keydown"},function(e){27===e.getKeyCode()&&U!==!0&&m()}),o.addRemoveHandler(function(){d.remove(),u.remove(),l.remove()}),n.getDom=c=function(){return o},n.append=f=function(e){r.append(e),a()},void 0!==C&&EACH(C,function(e){f(e)}),n.prepend=s=function(e){r.prepend(e),a()},n.after=v=function(e){o.after(e),a()},n.before=p=function(e){o.before(e),a()},n.remove=g=function(){o.remove()},n.removeAllChildren=y=function(){r.removeAllChildren()},n.getChildren=A=function(){return r.getChildren()},n.addWrapperStyle=S=function(e){o.addStyle(e),a()},void 0!==E&&S(E),n.addContentStyle=h=function(e){r.addStyle(e),a()},void 0!==D&&h(D),n.close=m=function(){void 0!==O&&void 0!==O.close?O.close(n)!==!1&&g():g()}}}),UUI.NOTICE=CLASS({init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v,p,g=i.wrapperStyle,y=i.contentStyle,A=i.isCannotClose,S=i.on,h=i.msg;o=UUI.MODAL({wrapperStyle:COMBINE_DATA({origin:{textAlign:"center"},extend:g}),contentStyle:y,isCannotClose:!0,on:S,children:[h]}),n.getDom=r=function(){return o.getDom()},n.append=d=function(e){o.append(e)},n.prepend=u=function(e){o.prepend(e)},n.after=l=function(e){o.after(e)},n.before=a=function(e){o.before(e)},n.remove=c=function(){o.remove()},n.removeAllChildren=f=function(){o.removeAllChildren()},n.getChildren=s=function(){return o.getChildren()},n.addWrapperStyle=v=function(e){o.addWrapperStyle(e)},n.addContentStyle=p=function(e){o.addContentStyle(e)},A!==!0&&DELAY(2,function(){o.close()})}}),UUI.PANEL=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v=void 0===i?void 0:i.children,p=void 0===i?void 0:i.wrapperStyle,g=void 0===i?void 0:i.contentStyle;o=DIV({children:[r=DIV()]}),n.getDom=d=function(){return o},n.append=u=function(e){r.append(e)},void 0!==v&&EACH(v,function(e){u(e)}),n.prepend=l=function(e){r.prepend(e)},n.removeAllChildren=a=function(){r.removeAllChildren()},n.getChildren=c=function(){return r.getChildren()},n.addWrapperStyle=f=function(e){o.addStyle(e)},void 0!==p&&f(p),n.addContentStyle=s=function(e){r.addStyle(e)},void 0!==g&&s(g)}}),UUI.TABLE=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c=void 0===i?void 0:i.style,f=void 0===i?void 0:i.children,s=void 0===i?void 0:i.trs,v=[],p={};void 0===s&&(s={}),o=TABLE({style:c,chlidren:f}),n.getDom=r=function(){return o},n.addTR=d=function(e){var t=e.key,n=e.tr,i=e.isFirst;void 0!==s[t]?(n.insertBefore(s[t]),v[FIND_KEY({data:v,value:s[t]})]=n,s[t].remove()):i===!0&&v.length>0?(n.insertBefore(v[0]),v.unshift(n)):(o.append(n),v.push(n)),s[t]=n},EACH(s,function(e){v.push(e),o.append(e)}),n.removeTR=u=function(e){var t=s[e],n=p[e];void 0!==t&&t.remove(),void 0!==n&&EACH(n,function(e){e()}),REMOVE({data:v,value:t}),REMOVE_AT({data:s,key:e}),REMOVE_AT({data:p,key:e})},n.addRemoveTRHandler=l=function(e,t){void 0===p[e]&&(p[e]=[]),p[e].push(t)},n.removeAllTRs=a=function(){EACH(s,function(e,t){var n=p[t];e.remove(),void 0!==n&&EACH(n,function(e){e()})}),s={},v=[],p={}}}}),UUI.TEXT_BUTTON=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a=i.title,c=i.href,f=i.target,s=i.style,v=i.on;void 0!==v&&EACH(v,function(e,t){v[t]=function(t){e(t,n)}}),o=A({style:COMBINE_DATA({origin:{cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},extend:s}),href:c,target:f,on:v,children:[r=SPAN({children:[void 0===a?void 0===c?"":c:a]})]}),n.setTitle=d=function(e){r.removeAllChildren(),r.append(e)},n.getDom=u=function(){return o},n.tap=l=function(){o.tap()}}}),UUI.VALID_FORM=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f=void 0===i?void 0:i.errorMsgs,s=void 0===i?void 0:i.on,v=void 0===i?void 0:i.children,p=void 0===i?void 0:i.style,g=void 0===i?void 0:i.errorMsgStyle,y=[];void 0!==s&&EACH(s,function(e,t){s[t]=function(t){e(t,n)}}),o=FORM({style:p,children:v,on:s}),o.addRemoveHandler(function(){EACH(y,function(e){e.remove()})}),n.getDom=r=function(){return o},n.getData=d=function(){return o.getData()},n.setData=u=function(e){return o.setData(e)},n.submit=l=function(){o.submit()},n.showErrors=a=function(e){var t=COPY_DATA(e),i=function(e){EACH(e.getChildren(),function(e){var n,o,r,d;void 0!==e.getValue&&void 0!==e.getName&&(n=e.getName(),o=t[n],void 0!==o&&void 0!==f&&(r=f[n][o.type],"function"==typeof r&&(r=r(void 0!==o.validParam?o.validParam:o.validParams)),(e.getParent().getParent().isValidWrapper===!0?e.getParent().getParent():e.getParent().isValidWrapper===!0?e.getParent():e).after(d=P({style:g,children:[r]})),REMOVE_AT({data:t,key:n}),y.push(DELAY(2,function(e){d.remove(),REMOVE({data:y,value:e})})))),i(e)})};i(n)},n.getErrorMsgs=c=function(e){var t=COPY_DATA(e),i=[],o=function(e){EACH(e.getChildren(),function(e){var n,r,d;void 0!==e.getValue&&void 0!==e.getName&&(n=e.getName(),r=t[n],void 0!==r&&void 0!==f&&(d=f[n][r.type],"function"==typeof d&&(d=d(void 0!==r.validParam?r.validParam:r.validParams)),i.push(d),REMOVE_AT({data:t,key:n}))),o(e)})};return o(n),i}}}),UUI.V_CENTER=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n,i){"use strict";var o,r,d,u,l,a,c,f,s,v=void 0===i?void 0:i.children,p=void 0===i?void 0:i.wrapperStyle,g=void 0===i?void 0:i.contentStyle;o=TABLE({style:{width:"100%",margin:0,padding:0},children:[TR({style:{margin:0,padding:0},children:[r=TD({style:{margin:0,padding:0}})]})]}),n.getDom=d=function(){return o},n.append=u=function(e){r.append(e)},void 0!==v&&EACH(v,function(e){u(e)}),n.prepend=l=function(e){r.prepend(e)},n.removeAllChildren=a=function(){r.removeAllChildren()},n.getChildren=c=function(){return r.getChildren()},n.addWrapperStyle=f=function(e){o.addStyle(e)},void 0!==p&&f(p),n.addContentStyle=s=function(e){r.addStyle(e)},void 0!==g&&s(g)}});